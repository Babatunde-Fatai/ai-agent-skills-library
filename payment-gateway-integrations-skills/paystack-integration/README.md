# Paystack Integration Skill (Claude Code)

A high-reliability integration protocol for Paystack, optimized for autonomous coding agents and human developers. This skill enforces a "Security-First" contract to prevent common fintech implementation errors.

## üéØ Purpose
This skill acts as a logic-engine to guide AI agents through the complexities of African payment gateways (NGN, GHS, ZAR, KES). It prioritizes **data integrity** and **fraud prevention** over simple code-copying.

## üèó Project Architecture
This skill is divided into three layers:
1.  **The Contract (`AGENT_EXECUTION_SPEC.md`):** The non-negotiable logic rules.
2.  **The Library (`SKILL.md`):** Quick-access constants, currency tables, and decision trees.
3.  **The Implementations (`references/`):** Framework-specific patterns (Next.js, Express) and agnostic pseudo-code for other programming languages.

## üöÄ Environment Setup
To utilize this skill, the following secrets must be provisioned in your environment:

| Key | Scope | Purpose |
| :--- | :--- | :--- |
| `PAYSTACK_SECRET_KEY` | **Backend Only** | Authorizing API requests and verifying webhooks. |
| `PAYSTACK_PUBLIC_KEY` | **Frontend/Mobile** | Initializing the Inline.js popup/redirect. |
| `PAYSTACK_WEBHOOK_SECRET` | **Backend Only** | Used for HMAC-SHA512 signature verification. |

## üõ° Mandatory Implementation Pattern
Every implementation generated by this skill must follow this sequence to be considered "Production Ready":

1.  **Pre-flight:** Persist Order & Reference to DB.
2.  **Execution:** Initialize via Server-to-Server API.
3.  **Verification:** Dual-path confirmation (Webhook + Redirect Verification).
4.  **Fulfillment:** Idempotent database update with amount-matching.

## üõ† Maintenance & Contributions
If updating this skill, ensure that:
- Any new framework examples (e.g., Python/Django) follow the **Required Roles** defined in the `AGENT_EXECUTION_SPEC.md`.
- No example uses floating-point math for currency handling.
- Webhook examples always demonstrate **raw body** capture.

---
### ‚ö†Ô∏è Developer Safety Note
This skill handles financial transactions. Before moving to production:
* Always verify AI-generated code against the `AGENT_EXECUTION_SPEC.md`.
* Test end-to-end flows in Paystack Test Mode.
* Audit your webhook signature verification‚Äînever skip the raw body check.